{"version":3,"file":"main-DIBIgShz.js","sources":["../__vite-browser-external","../script.js"],"sourcesContent":["export default {}","import fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\n// Define paths - everything in public folder\r\nconst publicDir = './public';\r\nconst jsonDir = path.join(publicDir, 'json');\r\nconst sessionsDir = path.join(publicDir, 'sessions');\r\nconst homepagePath = './index.html';\r\n\r\n// Helper function to create an HTML file from JSON\r\nconst generateHTML = async (sessionData) => {\r\n    // Create all necessary directories\r\n    await fs.mkdir(publicDir, { recursive: true });\r\n    await fs.mkdir(jsonDir, { recursive: true });\r\n    await fs.mkdir(sessionsDir, { recursive: true });\r\n\r\n    const sessionHTML = `\r\n    <!DOCTYPE html>\r\n    <html lang=\"en\">\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n        <link rel=\"stylesheet\" href=\"/styles.css\">\r\n        <title>Session ${sessionData.session_id}</title>\r\n    </head>\r\n    <body>\r\n        <h1>Session ${sessionData.session_id}</h1>\r\n        <p><strong>Date:</strong> ${sessionData.timestamp}</p>\r\n        <p><strong>Summary:</strong> ${sessionData.summary}</p>\r\n        <h2>Content</h2>\r\n        <div class=\"content\">\r\n            <h3>Question</h3>\r\n            <p>${sessionData.content.question}</p>\r\n            <h3>Answer</h3>\r\n            <p>${sessionData.content.answer}</p>\r\n        </div>\r\n        <p><a href=\"/\">Back to Home</a></p>\r\n    </body>\r\n    </html>\r\n    `;\r\n\r\n    // Also copy the JSON to public directory to preserve it\r\n    await fs.writeFile(\r\n        path.join(jsonDir, 'session.json'),\r\n        JSON.stringify(sessionData, null, 2)\r\n    );\r\n\r\n    const outputFilePath = path.join(sessionsDir, `${sessionData.session_id}.html`);\r\n    await fs.writeFile(outputFilePath, sessionHTML);\r\n    console.log(`Session HTML created at: ${outputFilePath}`);\r\n};\r\n\r\n// Update the homepage with a link to the new session\r\nconst updateHomepage = async (sessionData) => {\r\n    let homepageContent = await fs.readFile(homepagePath, 'utf-8');\r\n    const newLink = `<li><a href=\"./sessions/${sessionData.session_id}.html\">Session ${sessionData.session_id}</a></li>`;\r\n\r\n    // Remove any duplicate links first\r\n    homepageContent = homepageContent.replace(new RegExp(newLink, 'g'), '');\r\n\r\n    // Add the new link\r\n    homepageContent = homepageContent.replace('</ul>', `    ${newLink}\\n        </ul>`);\r\n    await fs.writeFile(homepagePath, homepageContent);\r\n    console.log('Homepage updated with new session link.');\r\n};\r\n\r\n// Main function\r\nconst main = async () => {\r\n    try {\r\n        const jsonFile = path.join(jsonDir, 'session.json');\r\n        const data = await fs.readFile(jsonFile, 'utf-8');\r\n        const sessionData = JSON.parse(data);\r\n\r\n        // Generate session HTML and update homepage\r\n        await generateHTML(sessionData);\r\n        await updateHomepage(sessionData);\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n    }\r\n};\r\n\r\n// Only run in Node.js environment\r\nif (typeof window === 'undefined') {\r\n    main();\r\n}"],"names":["fs","publicDir","jsonDir","path","sessionsDir","homepagePath","generateHTML","sessionData","sessionHTML","outputFilePath","updateHomepage","homepageContent","newLink","main","jsonFile","data","error"],"mappings":"ssBAAA,MAAeA,EAAA,CAAA,ECITC,EAAY,WACZC,EAAUC,EAAK,KAAKF,EAAW,MAAM,EACrCG,EAAcD,EAAK,KAAKF,EAAW,UAAU,EAC7CI,EAAe,eAGfC,EAAe,MAAOC,GAAgB,CAExC,MAAMP,EAAG,MAAMC,EAAW,CAAE,UAAW,EAAI,CAAE,EAC7C,MAAMD,EAAG,MAAME,EAAS,CAAE,UAAW,EAAI,CAAE,EAC3C,MAAMF,EAAG,MAAMI,EAAa,CAAE,UAAW,EAAI,CAAE,EAE/C,MAAMI,EAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAOCD,EAAY,UAAU;AAAA;AAAA;AAAA,sBAGzBA,EAAY,UAAU;AAAA,oCACRA,EAAY,SAAS;AAAA,uCAClBA,EAAY,OAAO;AAAA;AAAA;AAAA;AAAA,iBAIzCA,EAAY,QAAQ,QAAQ;AAAA;AAAA,iBAE5BA,EAAY,QAAQ,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAQvC,MAAMP,EAAG,UACLG,EAAK,KAAKD,EAAS,cAAc,EACjC,KAAK,UAAUK,EAAa,KAAM,CAAC,CAC3C,EAEI,MAAME,EAAiBN,EAAK,KAAKC,EAAa,GAAGG,EAAY,UAAU,OAAO,EAC9E,MAAMP,EAAG,UAAUS,EAAgBD,CAAW,EAC9C,QAAQ,IAAI,4BAA4BC,CAAc,EAAE,CAC5D,EAGMC,EAAiB,MAAOH,GAAgB,CAC1C,IAAII,EAAkB,MAAMX,EAAG,SAASK,EAAc,OAAO,EAC7D,MAAMO,EAAU,2BAA2BL,EAAY,UAAU,kBAAkBA,EAAY,UAAU,YAGzGI,EAAkBA,EAAgB,QAAQ,IAAI,OAAOC,EAAS,GAAG,EAAG,EAAE,EAGtED,EAAkBA,EAAgB,QAAQ,QAAS,OAAOC,CAAO;AAAA,cAAiB,EAClF,MAAMZ,EAAG,UAAUK,EAAcM,CAAe,EAChD,QAAQ,IAAI,yCAAyC,CACzD,EAGME,EAAO,SAAY,CACrB,GAAI,CACA,MAAMC,EAAWX,EAAK,KAAKD,EAAS,cAAc,EAC5Ca,EAAO,MAAMf,EAAG,SAASc,EAAU,OAAO,EAC1CP,EAAc,KAAK,MAAMQ,CAAI,EAGnC,MAAMT,EAAaC,CAAW,EAC9B,MAAMG,EAAeH,CAAW,CACnC,OAAQS,EAAO,CACZ,QAAQ,MAAM,SAAUA,CAAK,CAChC,CACL,EAGI,OAAO,OAAW,KAClBH"}